$(document).ready(function(){function e(e,i){$(".guide_item").each(function(t,n){for(var o=$(n),s=o.data("title"),a=o.data("description"),r=o.data("tags"),c=o.data("search-keywords"),u=i.trim().split(/\s+/),g=!1,f=0;f<u.length;f++){var p=u[f];if(!(e&l&&-1!=s.indexOf(p)||e&d&&-1!=a.indexOf(p)||e&_&&-1!=r.indexOf(p)||e&h&&-1!=c.indexOf(p))){g=!1;break}g=!0}g?(o.parent().show(),o.closest(".container").show()):o.parent().hide()})}function i(e){var i=" search results";e!==undefined&&e&&(i=" guides",$("#additional_microprofile_guides").text(g+" additional MicroProfile Guides"),t());var o=$("#guides_basic_container .guide_column").children(":visible").length,s=$("#guides_microprofile_container .guide_column").children(":visible").length,a=$("#guides_microprofile_container .essential .guide_column").children(":visible").length,r=$("#guides_additional_container .guide_column").children(":visible").length;n(0==o,0==s,0==a,0==r),$("#guides_basic_banner .total_guide_count b").text(o+i),$("#guides_microprofile_banner .total_guide_count b").text(s+i),$("#guides_additional_banner .total_guide_count b").text(r+i);var c=$("#guides_basic_container .essential .guide_column").children(":visible").length;a=$("#guides_microprofile_container .essential .guide_column").children(":visible").length;$("#guides_basic_container .subtitle .essential").text(c+" essentials"),$("#guides_microprofile_container .subtitle .essential").text(a+" essentials");var u=$("#microprofile_more_guides .guide_column").children(":visible").length;$("#additional_microprofile_guides").text(u+" additional MicroProfile Guides")}function t(){$(".basic_section").show(),$(".microprofile_section").show(),$(".more_section").show()}function n(e,i,t,n){if(e?$(".basic_section").hide():$(".basic_section").show(),i?$(".microprofile_section").hide():$(".microprofile_section").show(),t?$(".extraMP").hide():$(".extraMP").show(),n?$(".more_section").hide():$(".more_section").show(),e&&i&&n){$(".no_results_section").show();var o=$("#guide_search_input").val();$(".search_term").text('"'+o+'"')}else $(".no_results_section").hide()}function o(){$(".guide_column").show(),i(!0)}function s(t){if(0==t.length)o();else{if(0===t.indexOf("tag:")){var n=t.substring(4).trim();e(_,n)}else e(l|d|_|h,t);i()}}function a(e){e?r(e):(search_value=[location.protocol,"//",location.host,location.pathname].join(""),history.pushState(null,"",search_value))}function r(e){if(e.startsWith("tag:")){var i=e.substring(e.indexOf(":")+1);i=i.trim(),search_value="?search="+encodeURIComponent(i)+"&key=tag",history.pushState(null,"",search_value),document.activeElement.blur()}else e=e.trim(),search_value="?search="+encodeURIComponent(e),history.pushState(null,"",search_value),document.activeElement.blur()}function c(){return $("#additional_microprofile_guides").text().split(" ")[0]}function u(){g=c();var e=location.search;if(e.length>0){for(var i=decodeURI(e.substring(1)).split("&"),t=!1,n=!1,o=0;o<i.length;o++)0===i[o].indexOf("search=")?t=i[o].substring(7):0===i[o].indexOf("key=")&&(n=i[o].substring(4));if(t){var a=n?n+": "+t:t;$("#guide_search_input").val(a).keyup()}}else if($("#guide_search_input").val()){s($("#guide_search_input").val().toLowerCase())}}var l=1,d=2,_=4,h=8,g=0;$("#guide_search_input").keyup(function(e){s(e.currentTarget.value.toLowerCase())}),$(window).on("popstate",function(){var e=location.search;query_string=e.substring(8),document.getElementById("guide_search_input").value=query_string,s(query_string)}),$(".clear_btn").on("click",function(){$("#guide_search_input").val("");var e=$("#guide_search_input").val();a(e),s(e),t()}),$("#guide_search_input").keypress(function(e){13==e.which&&a($("#guide_search_input").val())}),$("#guide_search_input").popover({container:"#guides_search_container",delay:{show:"520"},content:function(){return $("#popover_content").html()},trigger:"focus"}),$("#back_to_guides_button").on("click",function(){$("#guide_search_input").val(""),o()}),$("#guides_search_container").on("click",".tag_button",function(){var e="tag: "+$(this).html();$("#guide_search_input").val(e),$(".tag_button").removeClass("hidden"),$(this).addClass("hidden"),$("#guide_search_input").focus(),s(e)}),u()});