function inSingleColumnView(){return window.innerWidth<=twoColumnBreakpoint}function inMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function onAppleDevice(){return/(Mac|iPhone|iPod|iPad)/i.test(navigator.userAgent)}function onIE(){return/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)}function debounce(e,t,n){var i;return function(){var o=this,a=arguments,r=function(){i=null,n||e.apply(o,a)},l=n&&!i;clearTimeout(i),i=setTimeout(r,t),l&&e.apply(o,a)}}function copy_element_to_clipboard(e,t){if(window.clipboardData)window.clipboardData.setData("Text",e.innerText);else{var n=$("<textarea>");n.css({position:"absolute",left:"-1000px",top:"-1000px"});var i=$(e).clone().find("br").prepend("\r\n").end().text().trim();n.text(i),$("body").append(n),n.select(),document.execCommand("copy")?t():alert("Copy failed. Copy the command manually: "+e.innerText),n.remove()}}function handleStickyHeader(){if(!inSingleColumnView()){var e=window.navigator.userAgent;if(e.indexOf("MSIE")>0||e.indexOf("Trident/")>0){var t=$("header");$(window).scrollTop()<t.height()?t.removeClass("IEStickyHeader"):t.addClass("IEStickyHeader")}}}function heightOfVisibleBackground(){var e;if(isBackgroundBottomVisible()){var t=$(window).scrollTop();e=getBackgroundAbsoluteBottomPosition()-t}else e=$(window).height();return e}function getBackgroundAbsoluteBottomPosition(){var e=$("#background-container");return e.offset().top+(e.outerHeight()-backgroundSizeAdjustment)}function isBackgroundBottomVisible(){$("#background-container");return $(window).scrollTop()+$(window).height()>getBackgroundAbsoluteBottomPosition()}function resizeGuideSections(){if(window.innerWidth>twoColumnBreakpoint){var e=window.innerHeight-$("header").height()-$("#guide_content h2").first().height();$(".sect1:not(#guide_meta):not(#related-guides)").css({"min-height":e+"px"}),window.innerWidth>=threeColumnBreakpoint&&($("#toc-column").hasClass("in")||$("#toc-column").hasClass("inline")?$("#guide-column").removeClass("expanded"):$("#guide-column").addClass("expanded"))}else $(".sect1:not(#guide_meta):not(#related-guides)").css({"min-height":"initial"})}function handleFloatingCodeColumn(){if(window.innerWidth>twoColumnBreakpoint)if(isBackgroundBottomVisible()){var e=window.innerHeight,t=$("#end-of-guide")[0].getBoundingClientRect().top;if(t){var n=e-t;$("#code_column").css("bottom",n+"px")}else $("#code_column").css("bottom","auto")}else $("#code_column").css("bottom","0")}function checkForInertialScrolling(e){if(!inSingleColumnView()){var t,n,i=e.originalEvent,o=$(window).height(),a=$("nav").height();i.deltaY?n=i.deltaY>0?"down":"up":i.detail&&(n=i.detail>0?"down":"up"),n||console.log("Scroll direction was not determined.");var r=$(".sect1:not(#guide_meta) h2");r.each(function(e){var i=$(r.get(e)),l=i[0].getBoundingClientRect(),c=l.top,d=l.bottom;if("down"==n){if(c>0&&c<o&&d>o-200&&d<o)return t=i.offset().top-a,!1}else if(c>200&&c<400){var s=i.parents(".sect1").prev(),u=s.height();return s.offset()!==undefined&&(t=s.offset().top-o+u),!1}}),t&&(e.preventDefault(),e.stopPropagation(),$("html").stop().animate({scrollTop:t},500))}}function getScrolledVisibleSectionID(){var e=null,t=0,n=0,i=$(window).scrollTop();if(n=window.innerWidth>twoColumnBreakpoint?$("#guide_meta").outerHeight(!0):$(".scroller-anchor").offset().top,i<=n)e="";else{var o=$(".sect1:not(#guide_meta):not(#related-guides), .sect2");if(window.innerWidth>twoColumnBreakpoint)o.each(function(n){var i=$(o.get(n)),a=$(window).height(),r=i.outerHeight(),l=i[0].getBoundingClientRect(),c=l.top,d=l.bottom,s=i.find(".sect2");s.length>0&&(r=(d=s[0].getBoundingClientRect().top)-c);var u=0;if(c>0){if(c<$("header").height()+1)return e=i.children("h2, h3")[0].id,!1;u=Math.min(r,a-c)}else u=Math.min(d,a);u>t&&(t=u,e=i.children("h2, h3")[0].id)});else{var a=$("#mobile-toc-accordion-container").outerHeight(!0);o.each(function(t){var n=$(o.get(t)),r=n.offset().top-a,l=0,c=n.find(".sect2");if(l=c.length>0?$(c[0]).offset().top-a:r+n.outerHeight(!0),i>=r&&i<l)return e=n.children("h2, h3")[0].id,!1})}}return e}function createEndOfGuideContent(){var e=$("#end-of-guide_left_section"),t=$("#end-of-guide_right_section"),n=$("#great-work-you-re-done, #great-work-youre-done").siblings().find("p").clone();n.first().prepend("Nice work! "),n.attr("tabindex","0"),e.prepend(n),$("#great-work-you-re-done, #great-work-youre-done").parent().remove(),$("#toc-container a[href='#great-work-you-re-done'], #toc-container a[href='#great-work-youre-done']").parent().remove();var i=$("#guide-attribution").siblings().find("p").html();i&&($("#guide_attribution").html(i),$("#guide-attribution").parent().remove(),$("#toc-container a[href='#guide-attribution']").parent().remove());var o=$("#related-links").siblings().find("p").clone();t.append(o),$("#related-links").parent().remove(),$("#toc-container a[href='#related-links']").parent().remove();var a=$("<li></li>"),r=$("<a></a>");$("#end-of-guide > h2").first().text();r.attr("href","#end-of-guide"),r.text(end-of-guide-title),a.append(r),$("#toc-container > ul").append(a)}function shiftWindow(){scrollBy(0,-100)}function accessContentsFromHash(e,t){var n=$(e);if(n.length>0){updateTOCHighlighting(e.substring(1));var i=n.offset().top;if(inSingleColumnView())i-=$("#mobile-toc-accordion-container").height();else i-=$(".container-fluid").height()||0;$("body").data("scrolling",!0),$("html, body").animate({scrollTop:i},400,function(){if(n.focus(),$("body").data("scrolling",!1),n.is(":focus"))return t&&t(),!1;n.attr("tabindex","-1"),n.focus(),t&&t()})}else defaultToFirstPage()}function defaultToFirstPage(){$("html, body").scrollTop(0),$(".liSelected").removeClass("liSelected");var e=window.location.pathname,t=e.substring(e.lastIndexOf("/")+1);history.replaceState(null,null,t)}var backgroundSizeAdjustment=200,twoColumnBreakpoint=1170,threeColumnBreakpoint=1440;$(document).ready(function(){function e(){$("#feedback_ratings img").on("click",function(){var e=$(this).data("guide-rating");"function"==typeof ga&&ga(1,"Guide Review",e,3),$("#feedback_ratings img").not($(this)).css("opacity",".30"),$(this).css("opacity","1")})}function t(e,t){var n,i=e.closest(".sect1").find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled):not(.unavailable)"),o=i.first(),a=i.last();if(t){if(e[0]===o[0]||0===i.length){var r=$("#toc-container .liSelected").prev().children().attr("href");if(r)if(inSingleColumnView()){var l=$(r);0===(n=l.closest(".sect1").find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled):not(.unavailable)").last()).length&&(n=l)}else accessContentsFromHash(r,function(){$("#code_column").find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled)").last().focus()});else inSingleColumnView()?$(".breadcrumb-hamburger toc-toggle collapsed").focus():n=$("#guide_meta")}}else if(e[0]===a[0]||0===i.length)if(inSingleColumnView()){var c=$("#toc-container .liSelected").next().children().attr("href");if(c)accessContentsFromHash(c,function(){$(c).focus()});else if(0===$("#toc-container .liSelected").length)accessContentsFromHash($("#toc-container li").first().children().attr("href"))}else n=$("#code_column");return n}function n(e,t){var n,i=$("#code_column").find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled)").last();if(t){if(e[0]===$("#code_column")[0]){var o=$("#toc-container .liSelected").children().attr("href");if(o){var a=$(o);if(0===(n=a.closest(".sect1").find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled):not(.unavailable)").last()).length){var r=window.scrollY,l=$("nav").height(),c=Math.round(r+l);Math.round(a.offset().top)>c?n=a:accessContentsFromHash(o)}}else n=$("#guide_meta")}}else if(e[0]===i[0]){var d=$("#toc-container .liSelected").next().children().attr("href"),s=null;if(d)accessContentsFromHash(d,function(){$(d).focus()});else if(0===$("#toc-container .liSelected").length)accessContentsFromHash($("#toc-container li").first().children().attr("href"));else $("#toc-container li").last().hasClass("liSelected")&&$("#end-of-guide_left_section").focus();if(s)n=$(s).find("[tabindex=0], a[href], button, instruction, action").filter(":visible:not(:disabled)").first()}return n}$("#feedback_ratings img").hover(function(){$("#feedback_ratings img").not($(this)).css("opacity",".50"),$(this).css("opacity","1")}),$(window).on("resize",function(){handleFloatingTableOfContent(),handleFloatingTOCAccordion(),resizeGuideSections(),handleFloatingCodeColumn()}),onAppleDevice()||onIE()||$(window).on("mousewheel DOMMouseScroll",function(e){checkForInertialScrolling(e)}),$(window).on("scroll",function(){handleFloatingTOCAccordion(),handleStickyHeader(),handleFloatingTableOfContent(),handleFloatingCodeColumn()}),window.addEventListener("hashchange",function(e){e.preventDefault(),accessContentsFromHash(location.hash)}),$(window).on("load",function(){handleFloatingTableOfContent(),e(),handleFloatingCodeColumn()}),$(window).on("keydown",function(e){if(!0===$("body").data("scrolling"))return e.preventDefault(),void e.stopPropagation();var i,o=e.keyCode||e.which,a=e.shiftKey;if(9===o){var r=$(document.activeElement);r[0]==$("#guide-column")[0]||r.parents("#guide-column").length>0?"guide_meta"===r.attr("id")?a?i=$("#tags_container:visible").length>0?$("#tags_container a").last():$("#breadcrumb_row a").last():inSingleColumnView()||(i=$("#code_column")):i=t(r,a):(r[0]==$("#code_column")[0]||r.parents("#code_column").length>0)&&(i=n(r,a)),i&&i.length>0&&(e.preventDefault(),i.focus())}})});